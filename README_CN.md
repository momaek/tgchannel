# Telegram Channel çˆ¬è™«ç³»ç»Ÿ

ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ Telegram Channel çˆ¬è™«å’Œç›‘æ§å·¥å…·ï¼Œä½¿ç”¨ Go è¯­è¨€å¼€å‘ã€‚è¯¥å·¥å…·å…è®¸ä½ è®¢é˜… Telegram é¢‘é“ã€æŠ“å–å†å²æ¶ˆæ¯ã€ç›‘æ§æ›´æ–°å¹¶å°†æ•°æ®å­˜å‚¨åˆ° SQLite æ•°æ®åº“ä¸­ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- ğŸ” **ç”¨æˆ·è®¤è¯**: æ”¯æŒæ‰‹æœºå·ç™»å½•å’ŒéªŒè¯ç è®¤è¯
- ğŸ“º **é¢‘é“è®¢é˜…**: è®¢é˜…æŒ‡å®šçš„ Telegram é¢‘é“
- ğŸ“Š **æ•°æ®æŠ“å–**: æŠ“å–é¢‘é“å†å²æ¶ˆæ¯å¹¶å­˜å‚¨åˆ°æ•°æ®åº“
- ğŸ”„ **å®æ—¶ç›‘å¬**: ç›‘å¬é¢‘é“æ›´æ–°å¹¶æ¨é€æ–°æ¶ˆæ¯
- ğŸ“‹ **è®¢é˜…ç®¡ç†**: æŸ¥çœ‹å’Œç®¡ç†å·²è®¢é˜…çš„é¢‘é“
- ğŸŒ **API é›†æˆ**: é€šè¿‡ Telegram API è·å–å…³æ³¨åˆ—è¡¨
- ğŸ’¾ **æ•°æ®å­˜å‚¨**: æ”¯æŒ SQLite æ•°æ®åº“å­˜å‚¨
- ğŸ¯ **æ¶ˆæ¯å¤„ç†**: æ”¯æŒæ¶ˆæ¯çš„è¿›ä¸€æ­¥å¤„ç†å’Œåˆ†æ
- ğŸ“± **é¢‘é“å‘ç°**: åˆ—å‡ºä½ åœ¨ Telegram ä¸Šå…³æ³¨çš„æ‰€æœ‰é¢‘é“

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Go 1.19 æˆ–æ›´é«˜ç‰ˆæœ¬
- SQLite3
- Telegram API å‡­æ®ï¼ˆAPI ID å’Œ API Hashï¼‰

### å®‰è£…

1. **å…‹éš†ä»“åº“**
   ```bash
   git clone https://github.com/momaek/tgchannel.git
   cd tgchannel
   ```

2. **å®‰è£…ä¾èµ–**
   ```bash
   go mod download
   ```

3. **é…ç½®åº”ç”¨**
   ```bash
   cp configs/config.example.yaml configs/config.yaml
   ```
   
   ç¼–è¾‘ `configs/config.yaml` å¹¶æ·»åŠ ä½ çš„ Telegram API å‡­æ®ï¼š
   ```yaml
   telegram:
     api_id: "ä½ çš„API_ID"
     api_hash: "ä½ çš„API_HASH"
     session_file: "session.json"
   ```

### ä½¿ç”¨æ–¹æ³•

#### 1. è®¤è¯ç™»å½•
```bash
# é¦–æ¬¡ç™»å½•ï¼Œéœ€è¦è¾“å…¥æ‰‹æœºå·å’ŒéªŒè¯ç 
make login
```

#### 2. è®¢é˜…é¢‘é“
```bash
# è®¢é˜…æŒ‡å®šé¢‘é“
make subscribe CHANNEL=@channel_username
```

#### 3. æŸ¥çœ‹è®¢é˜…é¢‘é“
```bash
# æŸ¥çœ‹å·²è®¢é˜…çš„é¢‘é“ï¼ˆä»æ•°æ®åº“ï¼‰
make list

# æŸ¥çœ‹ Telegram å…³æ³¨çš„ Channelï¼ˆé€šè¿‡ APIï¼‰
make channels
```

#### 4. æŠ“å–å†å²æ¶ˆæ¯
```bash
# ä½¿ç”¨ Channel ID æŠ“å–ï¼ˆæ¨èï¼‰
make fetch CHANNEL_ID=1234567890

# ä½¿ç”¨ç”¨æˆ·åæŠ“å–
make fetch CHANNEL_NAME=@channel_name

# æŒ‡å®šæŠ“å–æ•°é‡
make fetch CHANNEL_ID=1234567890 LIMIT=500
```

#### 5. æŸ¥çœ‹æŠ“å–çš„æ¶ˆæ¯
```bash
# æŸ¥çœ‹æ‰€æœ‰æ¶ˆæ¯ï¼ˆæœ€æ–°10æ¡ï¼‰
make messages

# æŸ¥çœ‹æŒ‡å®šæ•°é‡
make messages LIMIT=20

# æŸ¥çœ‹ç‰¹å®šé¢‘é“çš„æ¶ˆæ¯
make messages --id 1234567890
```

#### 6. å¯åŠ¨ç›‘å¬æœåŠ¡
```bash
# å¯åŠ¨æœåŠ¡ç›‘å¬é¢‘é“æ›´æ–°
make serve
```

## ğŸ“– å‘½ä»¤å‚è€ƒ

### è®¤è¯
```bash
go run main.go login
```
ä½¿ç”¨æ‰‹æœºå·å’ŒéªŒè¯ç è¿›è¡Œ Telegram è®¤è¯ã€‚

### é¢‘é“ç®¡ç†
```bash
# åˆ—å‡ºè®¢é˜…çš„é¢‘é“ï¼ˆä»æ•°æ®åº“ï¼‰
go run main.go list

# åˆ—å‡ºå…³æ³¨çš„æ‰€æœ‰é¢‘é“ï¼ˆé€šè¿‡ Telegram APIï¼‰
go run main.go channels
```

### æ¶ˆæ¯æ“ä½œ
```bash
# è®¢é˜…é¢‘é“
go run main.go subscribe --channel @channel_name

# æŠ“å–å†å²æ¶ˆæ¯
go run main.go fetch --id 1234567890 --limit 100
go run main.go fetch --name @channel_name --limit 100

# æŸ¥çœ‹æ¶ˆæ¯
go run main.go messages --limit 10
go run main.go messages --id 1234567890
```

### æœåŠ¡
```bash
# å¯åŠ¨ç›‘å¬æœåŠ¡
go run main.go serve
```

## âš™ï¸ é…ç½®

### Telegram é…ç½®
```yaml
telegram:
  api_id: "ä½ çš„API_ID"
  api_hash: "ä½ çš„API_HASH"
  session_file: "session.json"
  device_model: "Desktop"
  system_version: "Windows 10"
  app_version: "1.0.0"
```

### æ•°æ®åº“é…ç½®
```yaml
database:
  type: "sqlite"
  path: "tgchannel.db"
```

### çˆ¬è™«é…ç½®
```yaml
scraper:
  # æ¯æ¬¡è¯·æ±‚çš„æ¶ˆæ¯æ•°é‡ï¼ˆå»ºè®®ï¼š50-200ï¼‰
  batch_size: 100
  
  # è¯·æ±‚é—´éš”æ—¶é—´ï¼ˆç§’ï¼‰ï¼ˆå»ºè®®ï¼š1-5ï¼‰
  delay_between_requests: 2
  
  # æœ€å¤§é‡è¯•æ¬¡æ•°
  max_retries: 3
```

## ğŸ”§ é«˜çº§åŠŸèƒ½

### åˆ†é¡µæŠ“å–
å·¥å…·è‡ªåŠ¨å®ç°åˆ†é¡µæŠ“å–ä»¥é¿å… Telegram çš„é™æµï¼š
- åˆ†æ‰¹æŠ“å–æ¶ˆæ¯ï¼ˆå¯é…ç½®æ‰¹æ¬¡å¤§å°ï¼‰
- è¯·æ±‚ä¹‹é—´æ·»åŠ å»¶è¿Ÿï¼ˆå¯é…ç½®å»¶è¿Ÿæ—¶é—´ï¼‰
- æ”¯æŒæŠ“å–å¤§é‡å†å²æ¶ˆæ¯ï¼ˆå¦‚ 10,000 æ¡ï¼‰

### æ¶ˆæ¯å¤„ç†
- æå–æ¶ˆæ¯æ–‡æœ¬ã€åª’ä½“ä¿¡æ¯å’Œå…ƒæ•°æ®
- å­˜å‚¨å‘é€è€…ä¿¡æ¯ã€æµè§ˆæ•°ã€è½¬å‘æ•°å’Œå›å¤æ•°
- æ”¯æŒå„ç§åª’ä½“ç±»å‹ï¼ˆç…§ç‰‡ã€æ–‡æ¡£ã€ç½‘é¡µï¼‰

### æ•°æ®åº“æ¶æ„
- **Users**: ç”¨æˆ·è®¤è¯ä¿¡æ¯
- **Channels**: é¢‘é“å…ƒæ•°æ®å’Œç»Ÿè®¡ä¿¡æ¯
- **Subscriptions**: ç”¨æˆ·-é¢‘é“è®¢é˜…å…³ç³»
- **Messages**: å®Œæ•´çš„æ¶ˆæ¯æ•°æ®å’Œå…ƒæ•°æ®

## ğŸ“Š æ•°æ®åˆ†æ

å­˜å‚¨çš„æ•°æ®å¯ç”¨äºï¼š
- å†…å®¹åˆ†æå’Œçƒ­é—¨è¯é¢˜
- å‚ä¸åº¦æŒ‡æ ‡åˆ†æ
- å†å²æ•°æ®æŒ–æ˜
- è‡ªåŠ¨åŒ–å†…å®¹ç›‘æ§

## ğŸ¤ è´¡çŒ®

1. Fork ä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. æ‰“å¼€ Pull Request

## ğŸ“ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## âš ï¸ å…è´£å£°æ˜

æ­¤å·¥å…·ä»…ä¾›æ•™è‚²å’Œç ”ç©¶ç›®çš„ä½¿ç”¨ã€‚è¯·å°Šé‡ Telegram çš„æœåŠ¡æ¡æ¬¾å¹¶è´Ÿè´£ä»»åœ°ä½¿ç”¨ã€‚ä½œè€…ä¸å¯¹æ­¤å·¥å…·çš„è¯¯ç”¨è´Ÿè´£ã€‚

## ğŸ†˜ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **"CHANNEL_INVALID" é”™è¯¯**
   - ç¡®ä¿ä½ æ˜¯è¯¥é¢‘é“çš„æˆå‘˜
   - æ£€æŸ¥é¢‘é“ ID æ˜¯å¦æ­£ç¡®

2. **é™æµé—®é¢˜**
   - åœ¨é…ç½®ä¸­å¢åŠ  `delay_between_requests`
   - åœ¨é…ç½®ä¸­å‡å°‘ `batch_size`

3. **è®¤è¯é—®é¢˜**
   - åˆ é™¤ `session.json` å¹¶é‡æ–°è®¤è¯
   - æ£€æŸ¥ä½ çš„ API å‡­æ®

### è·å–å¸®åŠ©

- æŸ¥çœ‹[æ–‡æ¡£](docs/GETTING_STARTED.md)
- åœ¨ GitHub ä¸Šæäº¤ issue
- æŸ¥çœ‹é…ç½®ç¤ºä¾‹

## ğŸ”— é“¾æ¥

- [Telegram API æ–‡æ¡£](https://core.telegram.org/api)
- [gotd/td åº“](https://github.com/gotd/td)
- [Go æ–‡æ¡£](https://golang.org/doc/)

---

**ä¸º Telegram ç¤¾åŒºè€Œåˆ¶ä½œ â¤ï¸** 